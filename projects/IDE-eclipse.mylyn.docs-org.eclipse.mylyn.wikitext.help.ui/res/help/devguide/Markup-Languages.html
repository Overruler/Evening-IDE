<?xml version='1.0' encoding='utf-8' ?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>WikiText Developer Guide - Markup Languages</title><link type="text/css" rel="stylesheet" href="book.css"/><style type="text/css">
pre code {
	display: block;
	border: 1px solid gray;
	margin: 1em;
	padding: 1em;
	background-color: #F0F0F0;
}
</style></head><body><table class="navigation" style="width: 100%;" border="0" summary="navigation"><tr><th style="width: 100%" align="center" colspan="3">Markup Languages</th></tr><tr><td style="width: 20%" align="left"><a href="WikiText-and-the-UI.html" title="WikiText and the UI"><img alt="Previous" border="0" src="images/prev.gif"/></a></td><td style="width: 60%" align="center"></td><td style="width: 20%" align="right"><a href="Contributing.html" title="Contributing"><img alt="Next" border="0" src="images/next.gif"/></a></td></tr><tr><td style="width: 20%" align="left" valign="top">WikiText and the UI</td><td style="width: 60%" align="center"></td><td style="width: 20%" align="right" valign="top">Contributing</td></tr></table><hr/><h1 id="MarkupLanguages">Markup Languages</h1><p>Markup languages are the core concept that WikiText uses to define a parser for specific wiki markup.  WikiText provides facilities for adding new markup languages or extending an existing one.  All markup languages in WikiText extend the <code>org.eclipse.mylyn.wikitext.core.parser.markup.MarkupLanguage</code> class.</p><h2 id="ExtendinganExistingMarkupLanguage">Extending an Existing Markup Language</h2><p>You may wish to augment an existing markup language syntax with your own extensions.  With WikiText this is possible by subclassing an existing markup language.</p><p>MarkupLanguages that extend others may declare this hierarchy in the <code>org.eclipse.mylyn.wikitext.core.markupLanguage</code> extension point by using the <code>extends</code> attribute.  Declaring the hierarchy is optional, and allows for the markup language to inherit code completion, validation and help content from the markup language being extended.</p><h2 id="NewMarkupLanguages">New Markup Languages</h2><p>WikiText is designed to be extended to support new markup languages.  To add a markup language take the following steps:</p><ol><li>Extend <code>org.eclipse.mylyn.wikitext.core.parser.markup.MarkupLanguage</code> using one of the existing subclasses as an example</li><li>Add to your markup language class the blocks, phrases and replacement tokens that are to be part of your language (see <a href="#MarkupLanguageConcepts">Markup Language Concepts</a> below)</li><li>Add to your jar a Java service <code>META-INF/services/org.eclipse.mylyn.wikitext.core.parser.markup.MarkupLanguage</code></li><li>If it&#8217;s to be used in Eclipse, register your markup language using the <code>org.eclipse.mylyn.wikitext.core.markupLanguage</code> extension point. Other extension points that may be of interest to you:<ul><li><code>org.eclipse.core.contenttype.contentTypes</code> declare your markup language content type</li><li><code>org.eclipse.team.core.fileTypes</code> ensure that team providers know that your file type is text</li><li><code>org.eclipse.mylyn.wikitext.core.markupValidationRule</code> provide markup validation to detect common problems in markup</li></ul></li></ol><p>You&#8217;re most likely to be successful if you use one of the existing WikiText markup language plug-ins as an example.  A good starting point is the <code>org.eclipse.mylyn.wikitext.textile.core</code> plug-in.</p><p>If you plan to implement a markup language then you should be familiar with <a href="#MarkupLanguageConcepts">Markup Language Concepts</a>.</p><h2 id="MarkupLanguageUI">Markup Language UI</h2><p>To have a full featured UI for your markup language in Eclipse there are several additional extension points to be aware of:</p><ul><li><code>org.eclipse.mylyn.wikitext.ui.cheatSheet</code> a way of associating help content for your markup language</li><li><code>org.eclipse.mylyn.wikitext.ui.contentAssist</code> a means of having content-assist for your markup language</li><li><code>org.eclipse.mylyn.tasks.ui.taskEditorExtensions</code> make your markup language contribute to the Mylyn task editor</li></ul><p>For more information on these and other UI functions, take a look at the <code>org.eclipse.mylyn.wikitext.textile.ui</code> plug-in.</p><h2 id="MarkupLanguageConcepts">Markup Language Concepts</h2><p>Every <code>MarkupLanguage</code> declares its syntax in terms of blocks, phrases, and replacement tokens.  Though it is possible to create a markup language implementation that doesn&#8217;t use these concepts, these are the building blocks of all markup languages implemented within WikiText.</p><p>Take for example the following Textile markup:</p><p><img border="0" src="images/markup-plain.png"/></p><p><strong>Block</strong></p><p>A block is a multi-line region of text.  Blocks are a way of &#8216;chunking&#8217; a document, and loosely correspond to HTML concepts such as div, paragraph, list item, table cell, etc.</p><p>The example is composed of two blocks:</p><p><img border="0" src="images/markup-blocks.png"/></p><p>Though blocks may start and end anywhere on a line, they usually start at the beginning of one line and end with a line delimiter.  Blocks must not overlap with other blocks and in most cases do not nest within one another.  </p><p><strong>Phrase</strong></p><p>A phrase is a single-line region of text.  Phrases are often used to apply styles such as underline or bold to a region of text.  Phrases are analogous to an HTML span.</p><p>The example shows phrases:</p><p><img border="0" src="images/markup-phrases.png"/></p><p>Phrases may not overlap but may be nested.  Phrases must start and end on the same line.  Phrases cannot span a block boundary.</p><p><strong>Replacement Token</strong></p><p>Replacement tokens are regions of text that are replaced with a corresponding element.  For example, tokens may replace things such as '(c)' with &#169;.  Replacement tokens can also be used to replace regions of text with the same text but semantic meaning, such as a hyperlink. </p><p>The example has replacement tokens:</p><p><img border="0" src="images/markup-tokens.png"/></p><p>Replacement tokens cannot span a phrase or block boundary.  Replacement tokens cannot be nested and must start and end on the same line. </p><h3 id="MarkupLanguageImplementationTips">Markup Language Implementation Tips</h3><ol><li>The order that blocks, phrases and replacement tokens are declared by your markup language affect the markup syntax.</li><li>When implementing a markup language, always ensure that there&#8217;s one &#8216;catch-all&#8217; block, usually the paragraph block.  It should be last in the list of blocks declared by your language.</li><li>Make extensive use of brief test cases that test for markup language syntax.  WikiText has over 430 JUnit tests which we&#8217;ve found to be invaluable in verifying the expected behavior.  Take a look at <code>TextileLanguageTest</code> for an example of how to write tests for your markup language.</li><li>If in doubt, always use an existing WikiText markup language as an example.</li><li>Feel free to post questions to the Mylyn newsgroup.</li></ol><hr/><table class="navigation" style="width: 100%;" border="0" summary="navigation"><tr><td style="width: 20%" align="left"><a href="WikiText-and-the-UI.html" title="WikiText and the UI"><img alt="Previous" border="0" src="images/prev.gif"/></a></td><td style="width: 60%" align="center"><a href="WikiText Developer Guide.html" title="WikiText Developer Guide"><img alt="WikiText Developer Guide" border="0" src="images/home.gif"/></a></td><td style="width: 20%" align="right"><a href="Contributing.html" title="Contributing"><img alt="Next" border="0" src="images/next.gif"/></a></td></tr><tr><td style="width: 20%" align="left" valign="top">WikiText and the UI</td><td style="width: 60%" align="center"></td><td style="width: 20%" align="right" valign="top">Contributing</td></tr></table></body></html>